(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ae9e5d8"],{"0a01":function(e,t,n){},"48aa":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-search",attrs:{flex:"dir:top"}},[n("div",{staticClass:"panel-search__input-group",attrs:{"flex-box":"0",flex:"dir:top main:center cross:center"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handlePanelClick(t)}}},[n("d2-icon-svg",{staticClass:"panel-search__logo",attrs:{name:"d2-admin-text"}}),n("el-autocomplete",{ref:"input",staticClass:"panel-search__input",attrs:{"suffix-icon":"el-icon-search",placeholder:"搜索页面","fetch-suggestions":e.querySearch,"trigger-on-focus":!1,clearable:!0},on:{select:e.handleSelect},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.handleEsc(t)}},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.item;return n("d2-panel-search-item",{attrs:{item:t}})}}]),model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),n("div",{staticClass:"panel-search__tip"},[e._v(" 您可以使用快捷键 "),n("span",{staticClass:"panel-search__key"},[e._v(e._s(e.hotkey.open))]),e._v(" 唤醒搜索面板，按 "),n("span",{staticClass:"panel-search__key"},[e._v(e._s(e.hotkey.close))]),e._v(" 关闭 ")])],1),e.resultsList.length>0?n("div",{staticClass:"panel-search__results-group",attrs:{"flex-box":"1"}},[n("el-card",{attrs:{shadow:"never"}},[n("div",{staticClass:"panel-search__results-group-inner"},e._l(e.resultsList,(function(t,r){return n("d2-panel-search-item",{key:r,attrs:{item:t,"hover-mode":!0},nativeOn:{click:function(n){return e.handleResultsGroupItemClick(t.path)}}})})),1)])],1):e._e()])},s=[],a=(n("a4d3"),n("4de4"),n("d81d"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("ac1f"),n("841c"),n("159b"),n("96cf"),n("1da1")),c=n("ade3"),i=n("8d85"),u=n.n(i),o=n("5880"),l=n("b55f");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={mixins:[l["a"]],components:{"d2-panel-search-item":function(){return n.e("chunk-35e32ae2").then(n.bind(null,"f1ee"))}},data:function(){return{searchText:"",results:[]}},computed:p({},Object(o["mapState"])("d2admin/search",["hotkey","pool"]),{resultsList:function(){return 0===this.results.length&&""===this.searchText?this.pool.map((function(e){return p({value:e.fullTitle},e)})):this.results}}),methods:{querySearch:function(e,t){var n=this.pool,r=this.query(e?n:[],e);this.results=r,t(r)},query:function(e,t){return new u.a(e,{shouldSort:!0,tokenize:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["fullTitle","path"]}).search(t).map((function(e){return p({value:e.fullTitle},e)}))},focus:function(){var e=this;this.input="",setTimeout((function(){e.$refs.input&&e.$refs.input.focus(),e.searchText="",e.results=[]}),500)},handleResultsGroupItemClick:function(e){e!==this.$route.path?this.handleMenuSelect(e):this.handleEsc()},handleSelect:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.path,n!==this.$route.path){e.next=4;break}return this.handleEsc(),e.abrupt("return");case 4:return e.next=6,this.$nextTick();case 6:this.handleMenuSelect(n);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),closeSuggestion:function(){this.$refs.input.activated&&(this.$refs.input.suggestions=[],this.$refs.input.activated=!1)},handlePanelClick:function(){this.handleEsc()},handleEsc:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.closeSuggestion(),e.next=3,this.$nextTick();case 3:this.$emit("close");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},d=f,m=(n("e98c"),n("2877")),v=function(e){e.options.__source="src/layout/header-aside/components/panel-search/index.vue"},b=v,g=Object(m["a"])(d,r,s,!1,null,"47276df2",null);"function"===typeof b&&b(g);t["default"]=g.exports},e98c:function(e,t,n){"use strict";var r=n("0a01"),s=n.n(r);s.a}}]);